/**
 * Created by lyle on 14-4-14.
 */

exports.runProgram = function(socket)
{
    var exeFile = require('./staticVar.js').getBinaryFile();
    var spawn  = require('child_process').spawn;

    var program = spawn(exeFile);

    var result = "";

    program.stdout.setEncoding('utf8');
    program.stderr.setEncoding('utf8');

    program.stderr.on('data',function(data)
    {
        result+=data;
    });
    program.stdout.on('data',function(data)
    {
        result+=data;
    });
    program.stdout.on('end',function()
    {
        socket.emit('runEnd',{runResult:result});
        console.log(result);
        program.kill();
    });
};